<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>全文总结 - 智能文本分类</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../js/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "\u5168\u6587\u603b\u7ed3";
    var mkdocs_page_input_path = "6.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="../js/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-36723568-3', 'mkdocs.org');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> 智能文本分类</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">初识智能文本分类系统</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../1/">第一章:整体系统搭建</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../2/">第二章:构建标签词汇图谱</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../3/">第三章:特征工程与fasttext模型训练</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../4/">第四章:多模型训练与预测</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../5/">第五章:系统联调与测试</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">全文总结</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#_1">第一章总结</a></li>
    

    <li class="toctree-l2"><a href="#_2">第二章总结</a></li>
    

    <li class="toctree-l2"><a href="#_3">第三章总结</a></li>
    

    <li class="toctree-l2"><a href="#_4">第四章总结</a></li>
    

    <li class="toctree-l2"><a href="#_5">第五章总结</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../7/">附录-环境安装部署手册</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">智能文本分类</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>全文总结</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="_1">第一章总结</h2>
<ul>
<li>
<p>第1小节: 后端服务搭建</p>
<ul>
<li>
<p>学习了后端服务在整个系统中的主要作用：</p>
<ul>
<li>封装所有的文本处理环节，对外提供可以调用的API，让其他部门的同事或者不了解内部细节的人员都可以使用。</li>
</ul>
<hr />
</li>
<li>
<p>学习并实现了搭建并启动一个完整的django服务框架四步曲。</p>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了使用服务内部的三个python文件运行一个请求的demo的三步曲。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第2小节: 输入预处理</p>
<ul>
<li>学习了输入预处理在整个系统中的作用:<ul>
<li>保证用户输入的合理性，避免系统因为接受异常数据而过载。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了输入预处理的三步曲。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第3小节: 图谱匹配</p>
<ul>
<li>学习了什么是标签词汇图谱:<ul>
<li>它是由标签节点和词汇节点以及节点之间的边组成的一张树状图。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了图谱匹配在整个系统中的作用：<ul>
<li>通过匹配词汇召回所有可能的标签。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了图谱匹配的过程。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第4小节: 匹配歧义判断</p>
<ul>
<li>学习了什么是匹配歧义:<ul>
<li>在图谱匹配过程中，一个词汇可能一起匹配到多个标签，这时说明我们的词汇出现了歧义现象，这就是匹配歧义。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了匹配歧义判断在整个系统中的作用：<ul>
<li>在词汇出现歧义时，通过模型重新计算所属标签的概率，从语义层面获得更真实的标签概率。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了匹配歧义判断的过程。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第5小节: 概率调整</p>
<ul>
<li>学习了概率调整在整个系统中的作用:<ul>
<li>保证随着某一类别词汇出现的次数增多，这个类别的概率会随之增加。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了图谱匹配的过程。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第6小节: 概率归一化与父标签检索</p>
<ul>
<li>学习了概率归一化在整个系统中的作用:<ul>
<li>使标签概率的结果在（0到1）的概率值域内。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了父标签检索在整个系统中的作用:<ul>
<li>找到当前标签的父标签列表，丰富系统的返回结果。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了概率归一化与父标签检索的过程。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="_2">第二章总结</h2>
<ul>
<li>
<p>第1小节: 设计标签树</p>
<ul>
<li>
<p>学习了设计标签树过程的三步曲:</p>
<ul>
<li>第一步: 明确设计原则。  </li>
<li>第二步: 确定一级和二级标签。</li>
<li>第三步: 标签树存储。</li>
</ul>
<hr />
<ul>
<li>学习了明确设计原则:
        * 业务导向原则
        * 最小可行化原则</li>
</ul>
<hr />
<ul>
<li>学习了确定一级和二级标签。</li>
</ul>
<hr />
<ul>
<li>学习了标签存储:
        * 必须使用扁平化的存储结构。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第2小节: 构建标签树</p>
<ul>
<li>学习并实现了构建标签树的四步曲:<ul>
<li>第一步: 删除之前的与标签相关的节点和边。</li>
<li>第二步: 遍历标签结构列表中的每一个字典。</li>
<li>第三步: 遍历字典中的每一组key和value，根据key，MERGE每一个等级的父标签节点。</li>
<li>第四步: 遍历value列表，创建每一个等级的子标签节点及其关系。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第3小节: 获取原始数据</p>
<ul>
<li>学习了原始数据来源:<ul>
<li>公司作为内容生产商，有各种类型内容的生产小组，提供各种文本语料。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>学习了原始数据样式。</p>
<hr />
</li>
<li>
<p>学习了原始数据的基本属性。</p>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第4小节: 获取词汇集</p>
<ul>
<li>学习并实现了获取词汇集过程的三步曲:<ul>
<li>第一步: 读取原始数据到内存。</li>
<li>第二步: 获取句子中的名词并进行长度过滤。</li>
<li>第三步: 将词汇写入到csv文件之中。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第5小节: 将词汇集导入图谱</p>
<ul>
<li>学习并实现了将词汇集导入图谱过程三步曲:<ul>
<li>第一步，删除所有与词汇节点及其相关的边</li>
<li>第二步，遍历labels文件夹下的词汇csv文件。</li>
<li>第三步，遍历csv文件中的每一个词汇创建节点，并与对应的标签建立关系。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="_3">第三章总结</h2>
<ul>
<li>
<p>第1小节: 获取训练语料</p>
<ul>
<li>学习了获取训练语料过程的三步曲:<ul>
<li>第一步： 明确原始数据来源。</li>
<li>第二步： 定义正负样本。</li>
<li>第三步： 提取正负样本语料。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了明确原始数据来源:<ul>
<li>公司内容生产小组提供的各种类型的文章。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了定义正负样本:<ul>
<li>将文章中的每一条句子作为该类别的正样本； 将其他类别文章中的每一条句子作为负样本。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了提取正负样本:<ul>
<li>先提取正样本语料，再在正样本基础上，提取正负样本语料。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第2小节: 进行数据分析</p>
<ul>
<li>学习了数据分析过程的四步曲:<ul>
<li>第一步: 获取正负样本的分词列表和对应的标签。</li>
<li>第二步: 获取正负标签数量分布。</li>
<li>第三步: 获取句子长度分布。</li>
<li>第四步: 获取常见词频分布。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了获取正负样本的分词列表和对应的标签。<ul>
<li>作用: 为进行可视化数据分析作数据准备。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了获取正负标签数量分布。<ul>
<li>作用: 用于帮助调整正负样本比例。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了获取句子长度分布。<ul>
<li>作用: 用于帮助判断句子合理的截断长度。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了获取常见词频分布。<ul>
<li>作用: 指导之后模型超参数max_feature的选择和初步评估数据质量。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第3小节: 特征处理</p>
<ul>
<li>学习了特征处理过程的四步曲:<ul>
<li>第一步: 进行词汇映射</li>
<li>第二步: 将向量进行合适截断</li>
<li>第三步: 加入n-gram特征</li>
<li>第四步: 将向量进行最长补齐</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了进行词汇映射:<ul>
<li>作用: 将分词列表中的每个词映射成数字。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了将向量进行合适截断:<ul>
<li>作用: 将映射后的句子向量进行截断，以降低模型输入的特征维度，来防止过拟合。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了加入n-gram特征:<ul>
<li>作用: 将n-gram表示作为特征，能够补充特征中没有上下文中关联的缺点，将有效帮助模型捕捉上下文的语义关联。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了将向量进行最长补齐:<ul>
<li>作用: 为了不损失n-gram特征，使向量能够以矩阵形式作为模型输入。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第4小节: 构建模型结构</p>
<ul>
<li>学习了模型结构中三个重要的层:<ul>
<li>Embedding层</li>
<li>GAP层(全局平均池化层)</li>
<li>Dense + sigmoid层</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了Embedding层:<ul>
<li>层结构: 结构可以看作是一个矩阵，它的大小是语料的有效词汇总数(max_features)乘以我们预定义的embedding_dims，这个矩阵就相当于是由每一个特征拓展成embedding_dims后的表示。</li>
<li>层参数: 矩阵中的每一个数，一般模型需要求解的参数，因此Embedding层的参数总量是max_features x embedding_dims。</li>
<li>输入参数: max_features即最大特征数, embedding_dims即词嵌入维度, input_length即句子的最大长度。</li>
<li>输入形状: [None, input_length]</li>
<li>输出形状: [None, input_length, embedding_dims]</li>
<li>作用: 用向量表示每一个特征，在更高维度的映射空间捕捉词与词之间的关系。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了GAP层:<ul>
<li>层结构: 本质上是对矩阵的一种计算方法，无结构。</li>
<li>层参数: 无</li>
<li>输入参数: 无</li>
<li>输入形状: [None, input_length, embedding_dims]</li>
<li>输出形状: [None, embedding_dims]</li>
<li>作用: 消减模型参数总量，防止过拟合。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了Dense + sigmoid层:<ul>
<li>层结构: 具有个1个节点的一层全连接网络，最后的激活函数使用sigmoid。</li>
<li>层参数: 该节点中的w向量共50维，加上一个偏置b，共51个参数。</li>
<li>输入参数: 分别是该层的节点数以及使用的sigmoid函数。</li>
<li>输入形状: [None, embedding_dims]</li>
<li>输出形状: [None, 1]</li>
<li>作用: 将抽象的特征表示归一到指定的类别上，能够输出我们想要的0或者1的结果。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习并实现了使用上面三个层构建fasttext模型。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第5小节: 选取损失函数和优化方法</p>
<ul>
<li>
<p>fasttext模型选取的损失函数:</p>
<ul>
<li>二分类交叉熵损失函数</li>
</ul>
<hr />
</li>
<li>
<p>fasttext模型选取的优化方法:</p>
<ul>
<li>Adam</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>二分类交叉熵损失:<ul>
<li>作用: 用于描述模型预测值与真实值的差距大小。</li>
<li>形式:
<img alt="avatar" src="../img/cross_entropy.png" /></li>
<li>优势: 作为一种优化后的损失函数，能够避免均方误差损失的在处理sigmoid函数时收敛到趋于1时，梯度非常平缓，又因为使用的优化方法往往基于梯度下降，所以出现”学习迟缓”的现象。为了避免该现象，交叉熵的形式应运而生。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>Adam优化方法:<ul>
<li>作用: 求损失函数最优解的方法。</li>
<li>优势: 结合Adagrad与RSMProp的算法特点， 对梯度的一阶矩估计（即梯度的均值）和二阶矩估计（即梯度的未中心化的方差）进行综合考虑，计算出更新步长. 学习率可自由调节。</li>
<li>学习并实现了在模型中选取损失函数与优化方法。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第6小节: 进行模型训练 </p>
<ul>
<li>学习了实现模型训练和绘制准曲率和损失对照曲线的过程。</li>
</ul>
<hr />
<ul>
<li>学习了通过准确率对照曲线判断过拟合：<ul>
<li>当训练准确率上升而验证准确率开始平缓或下降时，在这个点处开始出现过拟合现象。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了如何防止过拟合:<ul>
<li>通过对比验证集与训练集准确曲线，在验证acc不在上升的轮数时停止训练。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第7小节: 模型保存与加载</p>
<ul>
<li>学会了实现模型保存与加载的过程。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="_4">第四章总结</h2>
<ul>
<li>
<p>第一小节: 多模型多进程训练</p>
<ul>
<li>
<p>学习了使用多进程的原因:</p>
<ul>
<li>在python这门语言中，存在一个全局解释锁，它使系统的多个线程无法一同使用CPU资源，对于计算密集型任务，必须采用多进程方式并行化，而我们的模型训练，正是最典型的计算密集型任务，里面涵盖大量的矩阵计算，因此，我们这里使用多进程训练。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>学习了多模型多进程的训练逻辑：</p>
<ul>
<li>开启第一个模型训练进程，进入训练状态后开始检测占用资源是否小于CPU/内存正常负载值。小于CPU/内存正常负载值，则开启第二个模型训练任务。否则，开始检测占用资源是否大于CPU/内存危险负载值，如果大于，则kill掉这个进程，否则，说明占用率处在正常负载值与危险负载值之间，此时，等待该模型训练进程结束，再自动开启下一个模型训练进程。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第二小节: 多模型多线程预测</p>
<ul>
<li>学习并实现了多模型多线程预测的三步曲:<ul>
<li>第一步: 将h5格式的模型转化成pb格式。</li>
<li>第二步: 使用docker启动tensorflow-serving微服务。</li>
<li>第三步: 多线程调用微服务并处理结果。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="_5">第五章总结</h2>
<ul>
<li>
<p>第一小节: 系统联调与测试</p>
<ul>
<li>学习并实现系统联调与测试过程的三步曲:<ul>
<li>第一步: 明确系统处理请求的五个环节。</li>
<li>第二步: 将这五个环节实现在django服务的views.py函数中。</li>
<li>第三步: 使用测试脚本进行测试。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>学习了明确系统处理请求的五个环节:<ul>
<li>输入预处理</li>
<li>图谱匹配</li>
<li>匹配歧义判断</li>
<li>概率调整</li>
<li>概率标签化与父标签检索</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>第二小节: 搭建前端可视化页面</p>
<ul>
<li>学习并实现了搭建一个前端可视化页面的三步曲:<ul>
<li>第一步：使用bootstrap3搭建一个可视化页面。</li>
<li>第二步：使用jquery向后端发送ajax请求并显示结果。</li>
<li>第三步: 在页面中输入文本进行请求测试。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../7/" class="btn btn-neutral float-right" title="附录-环境安装部署手册">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../5/" class="btn btn-neutral" title="第五章:系统联调与测试"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>©Copyright 2018, OrangeStar Inc.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../5/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../7/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
